(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function T(){}function se(e){return e()}function $(){return Object.create(null)}function B(e){e.forEach(se)}function Q(e){return typeof e=="function"}function ie(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ae(e){return Object.keys(e).length===0}function o(e,t){e.appendChild(t)}function H(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e){return document.createElement(e)}function C(e){return document.createTextNode(e)}function v(){return C(" ")}function U(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function u(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ue(e){return Array.from(e.childNodes)}function R(e,t){t=""+t,e.data!==t&&(e.data=t)}function F(e,t){e.value=t==null?"":t}let z;function q(e){z=e}function fe(){if(!z)throw new Error("Function called outside component initialization");return z}function ce(e){fe().$$.on_mount.push(e)}const S=[],ee=[];let G=[];const te=[],de=Promise.resolve();let x=!1;function pe(){x||(x=!0,de.then(oe))}function J(e){G.push(e)}const Y=new Set;let O=0;function oe(){if(O!==0)return;const e=z;do{try{for(;O<S.length;){const t=S[O];O++,q(t),ye(t.$$)}}catch(t){throw S.length=0,O=0,t}for(q(null),S.length=0,O=0;ee.length;)ee.pop()();for(let t=0;t<G.length;t+=1){const n=G[t];Y.has(n)||(Y.add(n),n())}G.length=0}while(S.length);for(;te.length;)te.pop()();x=!1,Y.clear(),q(e)}function ye(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(J)}}function ge(e){const t=[],n=[];G.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),G=t}const he=new Set;function _e(e,t){e&&e.i&&(he.delete(e),e.i(t))}function me(e,t,n,l){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),l||J(()=>{const f=e.$$.on_mount.map(se).filter(Q);e.$$.on_destroy?e.$$.on_destroy.push(...f):B(f),e.$$.on_mount=[]}),i.forEach(J)}function be(e,t){const n=e.$$;n.fragment!==null&&(ge(n.after_update),B(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ve(e,t){e.$$.dirty[0]===-1&&(S.push(e),pe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function we(e,t,n,l,r,i,f,c=[-1]){const d=z;q(e);const s=e.$$={fragment:null,ctx:[],props:i,update:T,not_equal:r,bound:$(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:$(),dirty:c,skip_bound:!1,root:t.target||d.$$.root};f&&f(s.root);let p=!1;if(s.ctx=n?n(e,t.props||{},(a,g,...w)=>{const L=w.length?w[0]:g;return s.ctx&&r(s.ctx[a],s.ctx[a]=L)&&(!s.skip_bound&&s.bound[a]&&s.bound[a](L),p&&ve(e,a)),g}):[],s.update(),p=!0,B(s.before_update),s.fragment=l?l(s.ctx):!1,t.target){if(t.hydrate){const a=ue(t.target);s.fragment&&s.fragment.l(a),a.forEach(j)}else s.fragment&&s.fragment.c();t.intro&&_e(e.$$.fragment),me(e,t.target,t.anchor,t.customElement),oe()}q(d)}class Le{$destroy(){be(this,1),this.$destroy=T}$on(t,n){if(!Q(n))return T;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!ae(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ke(){return window.go.main.App.GetCurrentUser()}function Ae(){return window.go.main.App.GetMultiaddr()}function Pe(){return window.go.main.App.GetPeerInfo()}function Ce(){return window.go.main.App.IsLoggedIn()}function ne(e,t){return window.go.main.App.Login(e,t)}function Ne(e,t,n){return window.go.main.App.Register(e,t,n)}function Ee(e){var X;let t,n,l,r=(((X=e[7])==null?void 0:X.fullName)||e[0])+"",i,f,c,d,s,p,a,g,w,L,N=(e[5]||"Loading...")+"",k,E,A,P,m,h,_=(e[6]||"Loading...")+"",I,b,W,V,K;return{c(){t=y("div"),n=y("h2"),l=C("Welcome, "),i=C(r),f=C("!"),c=v(),d=y("div"),s=y("h3"),s.textContent="Your Peer Info",p=v(),a=y("div"),g=y("strong"),g.textContent="Peer ID:",w=v(),L=y("code"),k=C(N),E=v(),A=y("div"),P=y("strong"),P.textContent="Multiaddress:",m=v(),h=y("code"),I=C(_),b=v(),W=y("div"),W.innerHTML=`<span class="status-indicator online svelte-ay9xry"></span> 
          <span>Connected to P2P Network</span>`,V=v(),K=y("div"),K.innerHTML=`<p class="svelte-ay9xry">\u{1F6A7} More features coming soon!</p> 
          <ul class="svelte-ay9xry"><li class="svelte-ay9xry">Friend Management</li> 
            <li class="svelte-ay9xry">Direct Messaging</li> 
            <li class="svelte-ay9xry">Conference Chats</li></ul>`,u(n,"class","svelte-ay9xry"),u(s,"class","svelte-ay9xry"),u(g,"class","svelte-ay9xry"),u(L,"class","svelte-ay9xry"),u(a,"class","peer-info svelte-ay9xry"),u(P,"class","svelte-ay9xry"),u(h,"class","svelte-ay9xry"),u(A,"class","peer-info svelte-ay9xry"),u(d,"class","info-card svelte-ay9xry"),u(W,"class","status svelte-ay9xry"),u(K,"class","placeholder svelte-ay9xry"),u(t,"class","chat-section svelte-ay9xry")},m(M,D){H(M,t,D),o(t,n),o(n,l),o(n,i),o(n,f),o(t,c),o(t,d),o(d,s),o(d,p),o(d,a),o(a,g),o(a,w),o(a,L),o(L,k),o(d,E),o(d,A),o(A,P),o(A,m),o(A,h),o(h,I),o(t,b),o(t,W),o(t,V),o(t,K)},p(M,D){var Z;D&129&&r!==(r=(((Z=M[7])==null?void 0:Z.fullName)||M[0])+"")&&R(i,r),D&32&&N!==(N=(M[5]||"Loading...")+"")&&R(k,N),D&64&&_!==(_=(M[6]||"Loading...")+"")&&R(I,_)},d(M){M&&j(t)}}}function Ie(e){let t,n,l=e[4]?"Register":"Login",r,i,f,c,d,s,p,a,g,w=e[9]?"Please wait...":e[4]?"Register":"Login",L,N,k,E=e[4]?"Already have an account? Login":"Need an account? Register",A,P,m,h=e[8]&&re(e),_=e[4]&&le(e);return{c(){t=y("div"),n=y("h2"),r=C(l),i=v(),h&&h.c(),f=v(),c=y("input"),d=v(),s=y("input"),p=v(),_&&_.c(),a=v(),g=y("button"),L=C(w),N=v(),k=y("button"),A=C(E),u(n,"class","svelte-ay9xry"),u(c,"type","text"),u(c,"placeholder","Username"),u(c,"class","input svelte-ay9xry"),c.disabled=e[9],u(s,"type","password"),u(s,"placeholder","Password"),u(s,"class","input svelte-ay9xry"),s.disabled=e[9],u(g,"class","btn-primary svelte-ay9xry"),g.disabled=e[9],u(k,"class","btn-secondary svelte-ay9xry"),k.disabled=e[9],u(t,"class","auth-section svelte-ay9xry")},m(I,b){H(I,t,b),o(t,n),o(n,r),o(t,i),h&&h.m(t,null),o(t,f),o(t,c),F(c,e[0]),o(t,d),o(t,s),F(s,e[1]),o(t,p),_&&_.m(t,null),o(t,a),o(t,g),o(g,L),o(t,N),o(t,k),o(k,A),P||(m=[U(c,"input",e[13]),U(s,"input",e[14]),U(g,"click",function(){Q(e[4]?e[11]:e[10])&&(e[4]?e[11]:e[10]).apply(this,arguments)}),U(k,"click",e[12])],P=!0)},p(I,b){e=I,b&16&&l!==(l=e[4]?"Register":"Login")&&R(r,l),e[8]?h?h.p(e,b):(h=re(e),h.c(),h.m(t,f)):h&&(h.d(1),h=null),b&512&&(c.disabled=e[9]),b&1&&c.value!==e[0]&&F(c,e[0]),b&512&&(s.disabled=e[9]),b&2&&s.value!==e[1]&&F(s,e[1]),e[4]?_?_.p(e,b):(_=le(e),_.c(),_.m(t,a)):_&&(_.d(1),_=null),b&528&&w!==(w=e[9]?"Please wait...":e[4]?"Register":"Login")&&R(L,w),b&512&&(g.disabled=e[9]),b&16&&E!==(E=e[4]?"Already have an account? Login":"Need an account? Register")&&R(A,E),b&512&&(k.disabled=e[9])},d(I){I&&j(t),h&&h.d(),_&&_.d(),P=!1,B(m)}}}function re(e){let t,n;return{c(){t=y("div"),n=C(e[8]),u(t,"class","error svelte-ay9xry")},m(l,r){H(l,t,r),o(t,n)},p(l,r){r&256&&R(n,l[8])},d(l){l&&j(t)}}}function le(e){let t,n,l;return{c(){t=y("input"),u(t,"type","text"),u(t,"placeholder","Full Name"),u(t,"class","input svelte-ay9xry"),t.disabled=e[9]},m(r,i){H(r,t,i),F(t,e[2]),n||(l=U(t,"input",e[15]),n=!0)},p(r,i){i&512&&(t.disabled=r[9]),i&4&&t.value!==r[2]&&F(t,r[2])},d(r){r&&j(t),n=!1,l()}}}function Me(e){let t,n,l,r,i,f;function c(p,a){return p[3]?Ee:Ie}let d=c(e),s=d(e);return{c(){t=y("main"),n=y("div"),l=y("h1"),l.textContent="\u{1F92B} Whisper",r=v(),i=y("p"),i.textContent="Decentralized P2P Chat",f=v(),s.c(),u(l,"class","svelte-ay9xry"),u(i,"class","subtitle svelte-ay9xry"),u(n,"class","container svelte-ay9xry"),u(t,"class","svelte-ay9xry")},m(p,a){H(p,t,a),o(t,n),o(n,l),o(n,r),o(n,i),o(n,f),s.m(n,null)},p(p,[a]){d===(d=c(p))&&s?s.p(p,a):(s.d(1),s=d(p),s&&(s.c(),s.m(n,null)))},i:T,o:T,d(p){p&&j(t),s.d()}}}function Re(e,t,n){let l="",r="",i="",f=!1,c=!1,d="",s="",p=null,a="",g=!1;ce(async()=>{try{n(3,f=await Ce()),f&&await w()}catch(m){console.error("Failed to check login status:",m),n(8,a=m.toString())}});async function w(){try{n(7,p=await ke()),n(5,d=await Pe()),n(6,s=await Ae()),n(0,l=(p==null?void 0:p.username)||"")}catch(m){console.error("Failed to load user data:",m)}}async function L(){if(!l||!r){n(8,a="Username and password are required");return}n(9,g=!0),n(8,a="");try{await ne(l,r),n(3,f=!0),await w(),n(1,r="")}catch(m){n(8,a=m.toString()||"Login failed"),console.error("Login error:",m)}finally{n(9,g=!1)}}async function N(){if(!l||!r||!i){n(8,a="All fields are required");return}if(r.length<8){n(8,a="Password must be at least 8 characters");return}n(9,g=!0),n(8,a="");try{await Ne(l,r,i),await ne(l,r),n(3,f=!0),await w(),n(1,r=""),n(4,c=!1)}catch(m){n(8,a=m.toString()||"Registration failed"),console.error("Registration error:",m)}finally{n(9,g=!1)}}function k(){n(4,c=!c),n(8,a=""),n(1,r="")}function E(){l=this.value,n(0,l)}function A(){r=this.value,n(1,r)}function P(){i=this.value,n(2,i)}return[l,r,i,f,c,d,s,p,a,g,L,N,k,E,A,P]}class Oe extends Le{constructor(t){super(),we(this,t,Re,Me,ie,{})}}new Oe({target:document.getElementById("app")});
